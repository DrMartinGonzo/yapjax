!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,b.Yapjax=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}var e=a("./internal/listen"),f=d(e),g=a("./internal/load-uri"),h=d(g),i=3,j=3e4,k=function a(b){var c=this;if(!(this instanceof a))return new a(b);this._previousUri=null,this._hook={},this._resources=[],this._modifier={},this._container="string"==typeof b.container?document.querySelector(b.container):b.container,this._target=b.target||"a[data-pjax]",this._retry=void 0!==b.retry?0|b.retry:i,this._timeout=void 0!==b.timeout?0|b.timeout:j,this._delay="function"==typeof b.delay?b.delay:void 0!==b.delay?0|b.delay:0;var d=(0,f.default)(this);this.destructor=function(){d(),c._container=void 0,c._hook=void 0}};k.prototype={timeout:function(a){return this._timeout=0|a,this},retry:function(a){return this._retry=0|a,this},delay:function(a){return this._delay="function"==typeof a?a:0|a,this},modify:function(a){var b=this;return Object.keys(a).forEach(function(c){b._modifier[c]=a[c]}),this},on:function(a,b){var c=a.toLowerCase();return this._hook[c]=b,this},load:function(a){(0,h.default)(this,a||window.location.pathname,!0)}},b.exports=k},{"./internal/listen":3,"./internal/load-uri":4}],2:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d=function(a,b,c){var d=b.toLowerCase();return window.dispatchEvent(new Event("pjax:"+d)),d in a._hook?a._hook[d](c):c};c.default=d},{}],3:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(c,"__esModule",{value:!0});var e=a("./load-uri"),f=d(e),g=a("../util/dom"),h=d(g),i=function(a){var b=function(b){var c=b.currentTarget,d=c.getAttribute("href");d&&(b.preventDefault(),a.load(d))};h.default.select(null,a._target).forEach(function(a){a.addEventListener("click",b)});var c=function(c,d){c.forEach(function(c){"childList"===c.type&&c.addedNodes.length>0&&Array.prototype.slice.call(c.addedNodes,0).forEach(function(c){"function"==typeof c.getAttribute&&(c.getAttribute("href")&&h.default.select(c.parentNode,a._target).some(function(a){return a===c})&&c.addEventListener("click",b),c.children.length>0&&h.default.select(c,a._target).forEach(function(a){a.addEventListener("click",b)}))})})},d=new MutationObserver(c);d.observe(document,{childList:!0,subtree:!0});var e=function(b){(0,f.default)(a,window.location.pathname,!1)};return window.addEventListener("popstate",e),function(){h.default.select(null,a._target).forEach(function(a){a.removeEventListener("click",b)}),d.disconnect(),window.removeEventListener("popstate",e)}};c.default=i},{"../util/dom":8,"./load-uri":4}],4:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(c,"__esModule",{value:!0});var e=a("./dispatch"),f=d(e),g=a("./send-request"),h=d(g),i=function(a,b,c){var d=!1,e=function(){d=!0};if((0,f.default)(a,"beforeload",{uri:b,cancel:e}),d)return!1;var g=a._modifier.uri?a._modifier.uri(b):b;if(g===a._previousUri)return!1;(0,f.default)(a,"loadstart",{uri:b});var i=function(){(0,h.default)(a,g,b,c)};return"function"==typeof a._delay?a._delay(i):window.setTimeout(i,a._delay),!0};c.default=i},{"./dispatch":2,"./send-request":6}],5:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(c,"__esModule",{value:!0});var e=a("uid"),f=d(e),g=a("../util/dom"),h=d(g),i=function(a,b){var c=document.head;a._resources.length&&(a._resources.forEach(function(a){var b=c.querySelector('[pjax-key="'+a+'"]');b.disabled=!0,b.parentNode.removeChild(b),b=void 0}),a._resources.length=0),a._container.innerHTML=b,a._container.scrollTop=0;var d=h.default.select(a._container,"title"),e=(d[d.length-1]||{}).innerHTML;document.title=a._modifier.title?a._modifier.title(e):e;var g=h.default.select(a._container,"link[href]"),i=h.default.select(a._container,"script[src]");g.concat(i).forEach(function(b){var d=(0,f.default)();a._resources.push(d);var e=document.createElement(b.tagName);e.setAttribute("pjax-key",d);var g=["src","href","type","rel","className"];g.forEach(function(a){e[a]=b[a]}),c.appendChild(e),b.disbled=!0,b.parentNode.removeChild(b)})};c.default=i},{"../util/dom":8,uid:9}],6:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}Object.defineProperty(c,"__esModule",{value:!0});var e=a("../util/ajax"),f=d(e),g=a("./rewrite"),h=d(g),i=a("./dispatch"),j=d(i),k=function(a,b,c,d){var e=0,g={uri:b,onload:function(e){var f=a._modifier.response?a._modifier.response(e):e;(0,h.default)(a,f),a._previousUri&&d&&window.history.pushState(c,null,c),a._previousUri=b,(0,j.default)(a,"loadcomplete",{response:f})},onerror:function(b,c){e+=1,e<a._retry?(console.warn("pjax: failed to load :: ("+b+") Retrying...("+e+")"),(0,f.default)(g)):(console.error("pjax: failed to load :: ("+b+") "+c),(0,j.default)(a,"loaderror",{code:0|b,message:c}))}};(0,f.default)(g)};c.default=k},{"../util/ajax":7,"./dispatch":2,"./rewrite":5}],7:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d=function(a){var b=a.uri,c=a.onload,d=a.onerror,e=new XMLHttpRequest;e.open("GET",b,!0),e.responseType="text",e.addEventListener("load",function(a){4===e.readyState&&(e.status>=200&&e.status<300||304===e.status?c(e.responseText):d(e.status,e.statusText))}),e.setRequestHeader("X-PJAX","yapjax"),e.addEventListener("error",function(a){d(-1,e.statusText)}),e.send(null)};c.default=d},{}],8:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d=function(a,b){return Array.prototype.slice.call((a||document).querySelectorAll(b))};c.default={select:d}},{}],9:[function(a,b,c){function d(a){return a=a||7,Math.random().toString(35).substr(2,a)}b.exports=d},{}]},{},[1])(1)});